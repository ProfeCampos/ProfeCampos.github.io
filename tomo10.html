<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tomo 10: Proyecto 2 - Manual de Instrumentaci贸n</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="tomo-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/arduino-light.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
    <header>
        <div class="header-container">
            <h1>Tomo 10: 隆PROYECTO INTEGRADOR 2! - Estaci贸n de Control T茅rmico</h1>
        </div>
    </header>
    <main class="tomo-content">
<div class="nav-links">
            <a href="index.html" class="nav-link">&larr; Volver al ndice</a>
            <a href="tomo11.html" class="nav-link">Tomo Siguiente &rarr;</a>
        </div>
        <p>隆Es hora del segundo gran proyecto! Vamos a integrar todo lo aprendido en el parcial para construir un sistema de control de temperatura inteligente y con m煤ltiples niveles de acci贸n. Nuestro dispositivo no solo reaccionar谩 al calor, sino que tomar谩 diferentes medidas dependiendo de la gravedad de la situaci贸n, mostrando toda la informaci贸n en tiempo real.</p>
        
        <div class="protagonista-section">
            <h3> La L贸gica del Proyecto: Control por Niveles con `if / else if / else`</h3>
            <p>A veces, no basta con una sola decisi贸n `if/else`. Necesitamos una cadena de decisiones. La estructura `if / else if / else` nos permite evaluar m煤ltiples condiciones en orden. El programa revisa la primera condici贸n `if`. Si no se cumple, revisa la siguiente `else if`. Contin煤a as铆 hasta que encuentra una que sea verdadera o llega al `else` final, que act煤a como la opci贸n por defecto. Esto es perfecto para crear sistemas con diferentes "modos" o "niveles de alerta".</p>
        </div>

        <h2> El C贸digo: Un Sistema de Alerta Multinivel</h2>
        <p>Construiremos un termostato que lee la temperatura con el LM35, la muestra en la LCD, y toma acciones por niveles: si hace un poco de calor, enciende un ventilador (con transistor); si hace mucho calor, adem谩s del ventilador, activa una alarma (con un rel茅).</p>
        <div class="code-container"> 
    <div class="code-header">
        <span>C贸digo Arduino</span>
        <button class="copy-btn">Copiar</button>
    </div> 
<pre><code class="language-cpp code-block">
/*
 * PROYECTO INTEGRADOR 2: Estaci贸n de Control T茅rmico
 * Descripci贸n: Controla un ventilador y una alarma de foco seg煤n la temperatura.
 * Por: Profe Campos
 * CECyTEM 05 Guacamayas
*/

#include &lt;Wire.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;

// --- PINES ---
const int pinSensor = A0;
const int pinVentilador = 9; // Controla el transistor
const int pinFoco = 7;       // Controla el rel茅

// --- UMBRALES ---
const float UMBRAL_VENTILADOR = 30.0;
const float UMBRAL_PELIGRO = 38.0;

// --- OBJETOS ---
LiquidCrystal_I2C lcd(0x27, 16, 2);

void setup() {
  pinMode(pinVentilador, OUTPUT);
  pinMode(pinFoco, OUTPUT);
  
  lcd.init();
  lcd.backlight();
  lcd.print("Control de Clima");
  lcd.setCursor(0, 1);
  lcd.print("    V 1.0");
  delay(2000);
  lcd.clear();
}

void loop() {
  // --- LECTURA Y CLCULO DE TEMPERATURA (LM35) ---
  int valorSensor = analogRead(pinSensor);
  float voltaje = (valorSensor / 1023.0) * 5.0;
  float temperatura = voltaje * 100;

  // --- LGICA DE CONTROL POR NIVELES ---
  if (temperatura < UMBRAL_VENTILADOR) {
    // Nivel 1: Normal
    lcd.setCursor(0, 0);
    lcd.print("Temp: ");
    lcd.print(temperatura);
    lcd.print(" C ");
    lcd.setCursor(0, 1);
    lcd.print("Estado: Normal  ");
    
    digitalWrite(pinVentilador, LOW);
    digitalWrite(pinFoco, LOW);

  } else if (temperatura >= UMBRAL_VENTILADOR && temperatura < UMBRAL_PELIGRO) {
    // Nivel 2: Enfriando
    lcd.setCursor(0, 0);
    lcd.print("Temp: ");
    lcd.print(temperatura);
    lcd.print(" C ");
    lcd.setCursor(0, 1);
    lcd.print("Estado: Enfriando");

    digitalWrite(pinVentilador, HIGH); // Ventilador ON
    digitalWrite(pinFoco, LOW);      // Foco OFF

  } else {
    // Nivel 3: Peligro
    lcd.clear();
    lcd.setCursor(0, 0);
    lcd.print("!!! ALERTA !!!");
    lcd.setCursor(0, 1);
    lcd.print("Temp: ");
    lcd.print(temperatura);
    lcd.print(" C");

    digitalWrite(pinVentilador, HIGH); // Ventilador ON
    digitalWrite(pinFoco, HIGH);     // Foco ON (Alarma)
  }

  delay(1000);
}
        </code></pre>
</div>
        <h2> Manos a la Obra: El Circuito</h2>
        <p>Integraremos el circuito del LM35 + Transistor con el de la LCD + Rel茅, creando un sistema de control aut贸nomo y con m煤ltiples niveles de acci贸n.</p>
        <div class="image-container">
            <h3>Diagrama del Circuito 10</h3>
            <img src="tomo 10_bb.png" alt="Diagrama de conexi贸n del proyecto final del segundo parcial">
        </div>

        <h2> Conceptos Clave de la Misi贸n</h2>
        <ul>
            <li><strong>L贸gica `if / else if / else`:</strong> Permite crear una cadena de decisiones para manejar m煤ltiples estados o niveles en un sistema.</li>
            <li><strong>Sistemas Embebidos:</strong> Un dispositivo con una computadora dedicada a una tarea espec铆fica, como nuestro termostato, que es un prototipo de un sistema embebido real.</li>
        </ul>

        <h2> 隆Int茅ntalo T煤 Mismo! (Retos)</h2>
        <ul>
            <li><strong>Umbrales Ajustables:</strong> A帽ade dos potenci贸metros. Uno para ajustar el `UMBRAL_VENTILADOR` y otro para el `UMBRAL_PELIGRO` en tiempo real. 隆Muestra los valores de umbral en la LCD!</li>
            <li><strong>Modo Silencio:</strong> Agrega un bot贸n que, al ser presionado, desactive la alarma del rel茅 temporalmente, aunque la temperatura siga en nivel de peligro.</li>
            <li><strong>Registro de Temperatura M谩xima:</strong> Programa el sistema para que recuerde y muestre en la LCD la temperatura m谩s alta que se ha registrado desde que se encendi贸.</li>
        </ul>
<div class="nav-links bottom-nav-links">
            <a href="index.html" class="nav-link">&larr; Volver al ndice</a>
            <a href="tomo11.html" class="nav-link">Tomo Siguiente &rarr;</a>
        </div>    </main>
    <footer>
        <p>Manual Digital de Instrumentaci贸n Industrial | CECyTEM 05 Guacamayas</p>
    </footer>
      <script>hljs.highlightAll();</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Busca todos los botones de copiar
    const allCopyButtons = document.querySelectorAll('.copy-btn');

    allCopyButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Encuentra el contenedor de c贸digo m谩s cercano
            const codeContainer = this.closest('.code-container');
            // Encuentra el bloque de c贸digo dentro de ese contenedor
            const codeBlock = codeContainer.querySelector('code');
            
            if (codeBlock) {
                // Copia el texto del c贸digo al portapapeles
                navigator.clipboard.writeText(codeBlock.innerText).then(() => {
                    // Feedback visual para el usuario
                    this.innerText = '隆Copiado!';
                    setTimeout(() => {
                        this.innerText = 'Copiar';
                    }, 2000); // Vuelve al texto original despu茅s de 2 segundos
                }).catch(err => {
                    console.error('Error al copiar el c贸digo: ', err);
                });
            }
        });
    });
});
</script>
</body>

</html>



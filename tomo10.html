<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tomo 10: Proyecto 2 - Manual de Instrumentación</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="tomo-style.css">
</head>
<body>
    <header>
        <div class="header-container">
            <h1>Tomo 10: ¡PROYECTO INTEGRADOR 2! - Estación de Control Térmico</h1>
        </div>
    </header>
    <main class="tomo-content">
        <a href="index.html" class="back-link">&larr; Volver al Índice Principal</a>
        <p>¡Es hora del segundo gran proyecto! Vamos a integrar todo lo aprendido en el parcial para construir un sistema de control de temperatura inteligente y con múltiples niveles de acción. Nuestro dispositivo no solo reaccionará al calor, sino que tomará diferentes medidas dependiendo de la gravedad de la situación, mostrando toda la información en tiempo real.</p>
        
        <div class="protagonista-section">
            <h3>🧠 La Lógica del Proyecto: Control por Niveles con `if / else if / else`</h3>
            <p>A veces, no basta con una sola decisión `if/else`. Necesitamos una cadena de decisiones. La estructura `if / else if / else` nos permite evaluar múltiples condiciones en orden. El programa revisa la primera condición `if`. Si no se cumple, revisa la siguiente `else if`. Continúa así hasta que encuentra una que sea verdadera o llega al `else` final, que actúa como la opción por defecto. Esto es perfecto para crear sistemas con diferentes "modos" o "niveles de alerta".</p>
        </div>

        <h2>🧠 El Código: Un Sistema de Alerta Multinivel</h2>
        <p>Construiremos un termostato que lee la temperatura con el LM35, la muestra en la LCD, y toma acciones por niveles: si hace un poco de calor, enciende un ventilador (con transistor); si hace mucho calor, además del ventilador, activa una alarma (con un relé).</p>
        <pre class="code-block"><code>
/*
 * PROYECTO INTEGRADOR 2: Estación de Control Térmico
 * Descripción: Sistema de control con dos umbrales de temperatura
 * que activa diferentes actuadores.
 * Por: Profe Campos
 * CECyTEM 05 Guacamayas
*/

#include <Wire.h>
#include <LiquidCrystal_I2C.h>

const int pinSensor = A0;         // Pin del sensor LM35.
const int pinVentilador = 9;      // Pin para el transistor del ventilador.
const int pinAlarma = 7;          // Pin para el relé de la alarma.
const float UMBRAL_VENTILADOR = 28.0; // 1er nivel de alerta.
const float UMBRAL_PELIGRO = 35.0;    // 2do nivel de alerta.

LiquidCrystal_I2C lcd(0x27, 16, 2);

void setup() {
  pinMode(pinVentilador, OUTPUT);
  pinMode(pinAlarma, OUTPUT);
  digitalWrite(pinVentilador, LOW);
  digitalWrite(pinAlarma, LOW);
  lcd.init();
  lcd.backlight();
}

void loop() {
  // Leemos y convertimos la temperatura del LM35.
  float temp = ((analogRead(pinSensor) / 1023.0) * 5.0) * 100;
  
  // Mostramos la temperatura en la LCD.
  lcd.clear();
  lcd.setCursor(0, 0);
  lcd.print("Temp: "); lcd.print(temp, 1); lcd.print(" C");
  
  // Cadena de decisiones:
  if (temp > UMBRAL_PELIGRO) { // 1. ¿Supera el umbral de peligro?
    lcd.setCursor(0, 1); lcd.print(">> PELIGRO <<");
    digitalWrite(pinVentilador, HIGH);
    digitalWrite(pinAlarma, HIGH);
  } else if (temp > UMBRAL_VENTILADOR) { // 2. Si no, ¿supera el umbral del ventilador?
    lcd.setCursor(0, 1); lcd.print("Enfriando...");
    digitalWrite(pinVentilador, HIGH);
    digitalWrite(pinAlarma, LOW);
  } else { // 3. Si no se cumple ninguna de las anteriores...
    lcd.setCursor(0, 1); lcd.print("Estado: Normal");
    digitalWrite(pinVentilador, LOW);
    digitalWrite(pinAlarma, LOW);
  }
  delay(1000);
}
        </code></pre>

        <h2>🔌 Manos a la Obra: El Circuito</h2>
        <p>Integraremos el circuito del LM35 + Transistor con el de la LCD + Relé, creando un sistema de control autónomo y con múltiples niveles de acción.</p>
        <div class="image-container">
            <h3>Diagrama del Circuito 10</h3>
            <img src="https://i.imgur.com/G5c9r8F.png" alt="Diagrama de conexión del proyecto final del segundo parcial">
        </div>

        <h2>💡 Conceptos Clave de la Misión</h2>
        <ul>
            <li><strong>Lógica `if / else if / else`:</strong> Permite crear una cadena de decisiones para manejar múltiples estados o niveles en un sistema.</li>
            <li><strong>Sistemas Embebidos:</strong> Un dispositivo con una computadora dedicada a una tarea específica, como nuestro termostato, que es un prototipo de un sistema embebido real.</li>
        </ul>

        <h2>🚀 ¡Inténtalo Tú Mismo! (Retos)</h2>
        <ul>
            <li><strong>Umbrales Ajustables:</strong> Añade dos potenciómetros. Uno para ajustar el `UMBRAL_VENTILADOR` y otro para el `UMBRAL_PELIGRO` en tiempo real. ¡Muestra los valores de umbral en la LCD!</li>
            <li><strong>Modo Silencio:</strong> Agrega un botón que, al ser presionado, desactive la alarma del relé temporalmente, aunque la temperatura siga en nivel de peligro.</li>
            <li><strong>Registro de Temperatura Máxima:</strong> Programa el sistema para que recuerde y muestre en la LCD la temperatura más alta que se ha registrado desde que se encendió.</li>
        </ul>
        <a href="index.html" class="back-link bottom-link">&larr; Volver al Índice Principal</a>
    </main>
    <footer>
        <p>Manual Digital de Instrumentación Industrial | CECyTEM 05 Guacamayas</p>
    </footer>
</body>
</html>
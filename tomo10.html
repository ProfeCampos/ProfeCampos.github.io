<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tomo 10: Proyecto 2 - Manual de Instrumentación</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="tomo-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/arduino-light.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
    <header>
        <div class="header-container">
            <h1>Tomo 10: ¡PROYECTO INTEGRADOR 2! - Estación de Control Térmico</h1>
        </div>
    </header>
    <main class="tomo-content">
<div class="nav-links">
            <a href="index.html" class="nav-link">&larr; Volver al Índice</a>
            <a href="tomo11.html" class="nav-link">Tomo Siguiente &rarr;</a>
        </div>
        <p>¡Es hora del segundo gran proyecto! Vamos a integrar todo lo aprendido en el parcial para construir un sistema de control de temperatura inteligente y con múltiples niveles de acción. Nuestro dispositivo no solo reaccionará al calor, sino que tomará diferentes medidas dependiendo de la gravedad de la situación, mostrando toda la información en tiempo real.</p>
        
        <div class="protagonista-section">
            <h3>🧠 La Lógica del Proyecto: Control por Niveles con `if / else if / else`</h3>
            <p>A veces, no basta con una sola decisión `if/else`. Necesitamos una cadena de decisiones. La estructura `if / else if / else` nos permite evaluar múltiples condiciones en orden. El programa revisa la primera condición `if`. Si no se cumple, revisa la siguiente `else if`. Continúa así hasta que encuentra una que sea verdadera o llega al `else` final, que actúa como la opción por defecto. Esto es perfecto para crear sistemas con diferentes "modos" o "niveles de alerta".</p>
        </div>

        <h2>🧠 El Código: Un Sistema de Alerta Multinivel</h2>
        <p>Construiremos un termostato que lee la temperatura con el LM35, la muestra en la LCD, y toma acciones por niveles: si hace un poco de calor, enciende un ventilador (con transistor); si hace mucho calor, además del ventilador, activa una alarma (con un relé).</p>
        <div class="code-container"> 
    <div class="code-header">
        <span>Código Arduino</span>
        <button class="copy-btn">Copiar</button>
    </div> 
<pre><code class="language-cpp code-block">
/*
 * PROYECTO INTEGRADOR 2: Estación de Control Térmico
 * Descripción: Controla un ventilador y una alarma de foco según la temperatura.
 * Por: Profe Campos
 * CECyTEM 05 Guacamayas
*/

#include &lt;Wire.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;

// --- PINES ---
const int pinSensor = A0;
const int pinVentilador = 9; // Controla el transistor
const int pinFoco = 7;       // Controla el relé

// --- UMBRALES ---
const float UMBRAL_VENTILADOR = 30.0;
const float UMBRAL_PELIGRO = 38.0;

// --- OBJETOS ---
LiquidCrystal_I2C lcd(0x27, 16, 2);

void setup() {
  pinMode(pinVentilador, OUTPUT);
  pinMode(pinFoco, OUTPUT);
  
  lcd.init();
  lcd.backlight();
  lcd.print("Control de Clima");
  lcd.setCursor(0, 1);
  lcd.print("    V 1.0");
  delay(2000);
  lcd.clear();
}

void loop() {
  // --- LECTURA Y CÁLCULO DE TEMPERATURA (LM35) ---
  int valorSensor = analogRead(pinSensor);
  float voltaje = (valorSensor / 1023.0) * 5.0;
  float temperatura = voltaje * 100;

  // --- LÓGICA DE CONTROL POR NIVELES ---
  if (temperatura < UMBRAL_VENTILADOR) {
    // Nivel 1: Normal
    lcd.setCursor(0, 0);
    lcd.print("Temp: ");
    lcd.print(temperatura);
    lcd.print(" C ");
    lcd.setCursor(0, 1);
    lcd.print("Estado: Normal  ");
    
    digitalWrite(pinVentilador, LOW);
    digitalWrite(pinFoco, LOW);

  } else if (temperatura >= UMBRAL_VENTILADOR && temperatura < UMBRAL_PELIGRO) {
    // Nivel 2: Enfriando
    lcd.setCursor(0, 0);
    lcd.print("Temp: ");
    lcd.print(temperatura);
    lcd.print(" C ");
    lcd.setCursor(0, 1);
    lcd.print("Estado: Enfriando");

    digitalWrite(pinVentilador, HIGH); // Ventilador ON
    digitalWrite(pinFoco, LOW);      // Foco OFF

  } else {
    // Nivel 3: Peligro
    lcd.clear();
    lcd.setCursor(0, 0);
    lcd.print("!!! ALERTA !!!");
    lcd.setCursor(0, 1);
    lcd.print("Temp: ");
    lcd.print(temperatura);
    lcd.print(" C");

    digitalWrite(pinVentilador, HIGH); // Ventilador ON
    digitalWrite(pinFoco, HIGH);     // Foco ON (Alarma)
  }

  delay(1000);
}
        </code></pre>
</div>
        <h2>🔌 Manos a la Obra: El Circuito</h2>
        <p>Integraremos el circuito del LM35 + Transistor con el de la LCD + Relé, creando un sistema de control autónomo y con múltiples niveles de acción.</p>
        <div class="image-container">
            <h3>Diagrama del Circuito 10</h3>
            <img src="tomo 10_bb.png" alt="Diagrama de conexión del proyecto final del segundo parcial">
        </div>

        <h2>💡 Conceptos Clave de la Misión</h2>
        <ul>
            <li><strong>Lógica `if / else if / else`:</strong> Permite crear una cadena de decisiones para manejar múltiples estados o niveles en un sistema.</li>
            <li><strong>Sistemas Embebidos:</strong> Un dispositivo con una computadora dedicada a una tarea específica, como nuestro termostato, que es un prototipo de un sistema embebido real.</li>
        </ul>

        <h2>🚀 ¡Inténtalo Tú Mismo! (Retos)</h2>
        <ul>
            <li><strong>Umbrales Ajustables:</strong> Añade dos potenciómetros. Uno para ajustar el `UMBRAL_VENTILADOR` y otro para el `UMBRAL_PELIGRO` en tiempo real. ¡Muestra los valores de umbral en la LCD!</li>
            <li><strong>Modo Silencio:</strong> Agrega un botón que, al ser presionado, desactive la alarma del relé temporalmente, aunque la temperatura siga en nivel de peligro.</li>
            <li><strong>Registro de Temperatura Máxima:</strong> Programa el sistema para que recuerde y muestre en la LCD la temperatura más alta que se ha registrado desde que se encendió.</li>
        </ul>
<div class="nav-links bottom-nav-links">
            <a href="index.html" class="nav-link">&larr; Volver al Índice</a>
            <a href="tomo11.html" class="nav-link">Tomo Siguiente &rarr;</a>
        </div>    </main>
    <footer>
        <p>Manual Digital de Instrumentación Industrial | CECyTEM 05 Guacamayas</p>
    </footer>
      <script>hljs.highlightAll();</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Busca todos los botones de copiar
    const allCopyButtons = document.querySelectorAll('.copy-btn');

    allCopyButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Encuentra el contenedor de código más cercano
            const codeContainer = this.closest('.code-container');
            // Encuentra el bloque de código dentro de ese contenedor
            const codeBlock = codeContainer.querySelector('code');
            
            if (codeBlock) {
                // Copia el texto del código al portapapeles
                navigator.clipboard.writeText(codeBlock.innerText).then(() => {
                    // Feedback visual para el usuario
                    this.innerText = '¡Copiado!';
                    setTimeout(() => {
                        this.innerText = 'Copiar';
                    }, 2000); // Vuelve al texto original después de 2 segundos
                }).catch(err => {
                    console.error('Error al copiar el código: ', err);
                });
            }
        });
    });
});
</script>
</body>

</html>



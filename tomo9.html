<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tomo 9: DHT11, Rel√©, LCD - Manual de Instrumentaci√≥n</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="tomo-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/arduino-light.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
    <header>
        <div class="header-container">
            <h1>Tomo 9: El Panorama Completo - DHT11, Rel√©s y LCD</h1>
        </div>
    </header>
    <main class="tomo-content">
        <div class="nav-links">
            <a href="index.html" class="nav-link">&larr; Volver al √çndice</a>
            <a href="tomo10.html" class="nav-link">Tomo Siguiente &rarr;</a>
        </div>
        <p>¬°Saludos, futuros ingenieros! Hoy vamos a dar un salto gigante: aprenderemos a leer dos variables ambientales con un solo sensor, a controlar aparatos del mundo real (como los que se conectan a la pared) y a mostrar toda esa informaci√≥n de manera profesional en una pantalla de cristal l√≠quido (LCD).</p>

        <div class="protagonista-section">
            <h3>üß† Protagonista 1: Sensor DHT11 (El Combo Digital 2x1)</h3>
            <p>El DHT11 es un sensor incre√≠blemente pr√°ctico. Es como tener un term√≥metro y un medidor de humedad en un solo paquete digital. Con un solo pin de datos obtenemos dos mediciones.</p>
       <div class="image-container">
            <img src="dht11-pinout-o-patillaje-700x569.png" alt="pin out DTH11">
        </div>
        </div>
        <div class="protagonista-section">
            <h3>‚öôÔ∏è Protagonista 2: El M√≥dulo de Rel√© (El Interruptor de Alto Voltaje)</h3>
            <p>¬øQu√© pasa si queremos controlar una l√°mpara de 120V? ¬°NUNCA la conectes a tu Arduino! Para eso usamos un <strong>Rel√©</strong>. Es un interruptor electromagn√©tico que usa una se√±al segura de 5V de Arduino para activar un interruptor interno, completamente aislado, que puede manejar alto voltaje de forma segura.</p>
                <div class="image-container">
            <img src="Single-Channel-Relay-Module-Pinout.jpg" alt="pin out RELE">
                  </div>
        </div>
        <div class="protagonista-section">
            <h3>üñ•Ô∏è Protagonista 3: La Pantalla LCD 16x2 con I2C</h3>
            <p>Para que nuestro proyecto sea independiente de la computadora, necesitamos una pantalla. La LCD 16x2 puede mostrar 2 filas de 16 caracteres. Para no usar todos nuestros pines, usamos un peque√±o m√≥dulo <strong>I2C</strong> soldado detr√°s, que reduce los cables necesarios a solo 4: VCC, GND, SDA (A4) y SCL (A5).</p>
               <div class="image-container">
            <img src="I2C-LCD-Display-Pinout.png" alt="pin out LDC con I2C">
                  </div>
        </div>

        <h2>üß† El C√≥digo: El Centro de Comando</h2>
        <p>Este c√≥digo necesita varias librer√≠as. Aseg√∫rate de instalarlas desde el Gestor de Librer√≠as de Arduino IDE: <em>DHT sensor library (de Adafruit)</em> y <em>LiquidCrystal_I2C</em>.</p>
        <div class="code-container"> 
    <div class="code-header">
        <span>C√≥digo Arduino</span>
        <button class="copy-btn">Copiar</button>
    </div> 
<pre><code class="language-cpp code-block">
/*
 * Misi√≥n 09: El Panorama Completo
 * Descripci√≥n: Muestra Temp/Humedad del DHT11 en una LCD y activa un rel√©.
 * Por: Profe Campos
 * CECyTEM 05 Guacamayas
*/

// --- INCLUIR LIBRER√çAS ---
#include &lt;Wire.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt; // Para la pantalla LCD
#include "DHT.h"                 // Para el sensor DHT

// --- CONFIGURACI√ìN DE COMPONENTES ---
#define DHTPIN 2       // Pin donde est√° el DHT11
#define DHTTYPE DHT11  // Definimos que es un DHT11
const int pinRele = 7; // Pin para controlar el rel√©

// Inicializamos los objetos
DHT dht(DHTPIN, DHTTYPE);
LiquidCrystal_I2C lcd(0x27, 16, 2); // Direcci√≥n I2C, 16 columnas, 2 filas

void setup() {
  Serial.begin(9600);
  pinMode(pinRele, OUTPUT);
  digitalWrite(pinRele, LOW); // Nos aseguramos que el rel√© empiece apagado

  dht.begin(); // Iniciamos el sensor DHT
  
  lcd.init();      // Iniciamos la pantalla LCD
  lcd.backlight(); // Encendemos la luz de fondo
  lcd.setCursor(0, 0); // Ponemos el cursor en la columna 0, fila 0
  lcd.print("Estacion CTEC");
  lcd.setCursor(0, 1); // Columna 0, fila 1
  lcd.print("Iniciando...");
  delay(2000);
  lcd.clear(); // Limpiamos la pantalla
}

void loop() {
  delay(2000); // Esperamos 2 segundos entre lecturas

  // Leer la humedad y la temperatura toma unos 250ms
  float h = dht.readHumidity();
  float t = dht.readTemperature();

  // Verificamos si la lectura fall√≥ (muy com√∫n con los DHT)
  if (isnan(h) || isnan(t)) {
    Serial.println("Error al leer del sensor DHT!");
    lcd.setCursor(0, 0);
    lcd.print("Error de Sensor");
    return; // Salimos del loop y lo intentamos de nuevo
  }

  // --- MOSTRAMOS EN LCD ---
  lcd.setCursor(0, 0);
  lcd.print("Temp: ");
  lcd.print(t);
  lcd.print(" C");

  lcd.setCursor(0, 1);
  lcd.print("Hum:  ");
  lcd.print(h);
  lcd.print(" %");

  // --- L√ìGICA DEL REL√â ---
  if (t > 30.0) { // Si la temperatura supera los 30 grados
    digitalWrite(pinRele, HIGH); // Activamos el rel√©
  } else {
    digitalWrite(pinRele, LOW);  // Lo desactivamos
  }
}
        </code></pre>
</div>
        <h2>üîå Manos a la Obra: El Circuito</h2>
        <p>Conectaremos los tres m√≥dulos principales. La parte m√°s delicada es la conexi√≥n del foco al lado de potencia del rel√©. <strong>¬°Pide supervisi√≥n del Profe Campos para este paso!</strong></p>
        <div class="image-container">
            <h3>Diagrama del Circuito 9</h3>
            <img src="tomo 9.png" alt="Diagrama de conexi√≥n de un sensor DHT11, una pantalla LCD I2C y un m√≥dulo de rel√©">
        </div>

        <h2>üí° Conceptos Clave de la Misi√≥n</h2>
        <ul>
            <li><strong>Aislamiento El√©ctrico:</strong> El rel√© a√≠sla completamente el circuito de control de bajo voltaje del circuito de potencia de alto voltaje, lo que es crucial por seguridad.</li>
            <li><strong>Comunicaci√≥n I2C:</strong> Un protocolo que permite conectar m√∫ltiples dispositivos (sensores, pantallas) usando solo dos pines (SDA y SCL).</li>
        </ul>

        <h2>üöÄ ¬°Int√©ntalo T√∫ Mismo! (Retos)</h2>
        <ul>
            <li><strong>Control de Humedad:</strong> Modifica la l√≥gica para que el rel√© se active si la humedad supera el 70%, simulando un deshumidificador.</li>
            <li><strong>Doble Condici√≥n:</strong> Cambia el c√≥digo para que el rel√© solo se active si la temperatura es alta Y la humedad tambi√©n es alta (operador `&&`).</li>
            <li><strong>Mensajes en LCD:</strong> Haz que en la pantalla LCD aparezca un mensaje como "Ventilador ON" o "Ventilador OFF" seg√∫n el estado del rel√©.</li>
        </ul>
<div class="nav-links bottom-nav-links">
            <a href="index.html" class="nav-link">&larr; Volver al √çndice</a>
            <a href="tomo10.html" class="nav-link">Tomo Siguiente &rarr;</a>
        </div>    </main>
    <footer>
        <p>Manual Digital de Instrumentaci√≥n Industrial | CECyTEM 05 Guacamayas</p>
    </footer>
    <script>hljs.highlightAll();</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Busca todos los botones de copiar
    const allCopyButtons = document.querySelectorAll('.copy-btn');

    allCopyButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Encuentra el contenedor de c√≥digo m√°s cercano
            const codeContainer = this.closest('.code-container');
            // Encuentra el bloque de c√≥digo dentro de ese contenedor
            const codeBlock = codeContainer.querySelector('code');
            
            if (codeBlock) {
                // Copia el texto del c√≥digo al portapapeles
                navigator.clipboard.writeText(codeBlock.innerText).then(() => {
                    // Feedback visual para el usuario
                    this.innerText = '¬°Copiado!';
                    setTimeout(() => {
                        this.innerText = 'Copiar';
                    }, 2000); // Vuelve al texto original despu√©s de 2 segundos
                }).catch(err => {
                    console.error('Error al copiar el c√≥digo: ', err);
                });
            }
        });
    });
});
</script>
</body>

</html>









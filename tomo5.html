<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tomo 5: Sensor LDR - Manual de Instrumentaci贸n</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="tomo-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/arduino-light.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
    <header>
        <div class="header-container">
            <h1>Tomo 5: El Ojo de la Noche - El Sensor de Luz LDR</h1>
        </div>
    </header>
    <main class="tomo-content">
        <div class="nav-links">
            <a href="index.html" class="nav-link">&larr; Volver al ndice</a>
            <a href="tomo6.html" class="nav-link">Tomo Siguiente &rarr;</a>
        </div>
        <p>Nuestros proyectos ya pueden reaccionar al tacto y al movimiento. Hoy les daremos la capacidad de "ver" la luz. Usaremos una LDR (Fotoresistencia) para crear un sistema que sepa si es de d铆a o de noche, sentando las bases para proyectos como luces nocturnas autom谩ticas o robots que siguen la luz.</p>

        <div class="protagonista-section">
            <h3> Protagonista de Hoy: La Fotoresistencia (LDR)</h3>
            <p>Una LDR (Light Dependent Resistor) es una resistencia muy especial: su valor en Ohms cambia dr谩sticamente seg煤n la cantidad de luz que la ilumina. A m谩s luz, menor resistencia; a mayor oscuridad, mayor resistencia. El Arduino no puede medir resistencia directamente, pero s铆 puede medir voltaje. Por eso, usamos un <strong>Divisor de Voltaje</strong> (la LDR y una resistencia fija de 10k惟) para convertir ese cambio de resistencia en un cambio de voltaje que podemos leer con un pin anal贸gico.</p>
            <div class="image-container">
            <img src="LDR_Esquema.png" alt="pinout LDR">
        </div>
        </div>

        <h2> El C贸digo: Midiendo la Oscuridad</h2>
        <p>Usaremos la funci贸n `analogRead()` para obtener un valor entre 0 y 1023 que representa el nivel de luz. Luego, con un `if`, decidiremos si hay suficiente oscuridad para encender un LED.</p>
        <div class="code-container"> 
    <div class="code-header">
        <span>C贸digo Arduino</span>
        <button class="copy-btn">Copiar</button>
    </div> 
<pre><code class="language-cpp code-block">
/*
 * Misi贸n 05: El Ojo de la Noche
 * Descripci贸n: Enciende un LED autom谩ticamente cuando est谩 oscuro.
 * Por: Profe Campos
 * CECyTEM 05 Guacamayas
*/

const int pinLdr = A0;      // Pin anal贸gico para leer el divisor de voltaje.
const int pinLed = 9;       // Usamos el pin 9 que es PWM (~).

int valorLuz = 0;           // Variable para guardar la lectura del LDR.
int umbralOscuridad = 300; // Umbral. Si la lectura es MENOR a esto, est谩 oscuro.
                            // Este valor puede necesitar ajuste.

void setup() {
  pinMode(pinLed, OUTPUT);
  Serial.begin(9600); // Para poder ver los valores del sensor.
}

void loop() {
  // Leemos el valor del pin anal贸gico y lo guardamos.
  valorLuz = analogRead(pinLdr);
  
  // Imprimimos el valor en el Monitor Serial para poder calibrar el umbral.
  Serial.print("Valor de Luz: ");
  Serial.println(valorLuz);

  // Si el valor de luz es menor que nuestro umbral...
  if (valorLuz < umbralOscuridad) {
    digitalWrite(pinLed, HIGH); // ...encendemos la luz.
  } else { // Si no...
    digitalWrite(pinLed, LOW); // ...la apagamos.
  }
  delay(200); // Peque帽a pausa.
}
        </code></pre>
</div> 
        <h2> Manos a la Obra: El Circuito</h2>
        <p>Construiremos una l谩mpara nocturna autom谩tica. El coraz贸n del circuito es el divisor de voltaje formado por la LDR y la resistencia de 10k惟. El punto medio es el que conectamos al pin A0.</p>
        <div class="image-container">
            <h3>Diagrama del Circuito 5</h3>
            <img src="Tomo 5.png" alt="Diagrama de conexi贸n del sensor de luz LDR">
        </div>

        <h2> Conceptos Clave de la Misi贸n</h2>
        <ul>
            <li><strong>Lectura Anal贸gica:</strong> Medici贸n de un voltaje continuo que el Arduino convierte a un valor num茅rico (0-1023).</li>
            <li><strong>Divisor de Voltaje:</strong> Un circuito simple con dos resistencias en serie que nos permite obtener un voltaje de salida proporcional a la relaci贸n entre las resistencias.</li>
        </ul>

        <h2> 隆Int茅ntalo T煤 Mismo! (Retos)</h2>
        <ul>
            <li><strong>Luz de Emergencia Inversa:</strong> Haz que el LED se encienda cuando haya MUCHA luz, como una alarma que te avisa si alguien enciende la luz de tu cuarto.</li>
            <li><strong>Luz Regulable:</strong> En lugar de solo encender o apagar el LED, usa `analogWrite()` para que el brillo del LED aumente a medida que se hace m谩s oscuro.</li>
            <li><strong>Calibraci贸n Autom谩tica:</strong> Al inicio del programa, haz que el Arduino mida la luz por 5 segundos y use ese valor promedio para establecer el `umbralOscuridad` autom谩ticamente.</li>
        </ul>
        <div class="nav-links bottom-nav-links">
            <a href="index.html" class="nav-link">&larr; Volver al ndice</a>
            <a href="tomo6.html" class="nav-link">Tomo Siguiente &rarr;</a>
        </div>
    </main>
    <footer>
        <p>Manual Digital de Instrumentaci贸n Industrial | CECyTEM 05 Guacamayas</p>
    </footer>
    <script>hljs.highlightAll();</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Busca todos los botones de copiar
    const allCopyButtons = document.querySelectorAll('.copy-btn');

    allCopyButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Encuentra el contenedor de c贸digo m谩s cercano
            const codeContainer = this.closest('.code-container');
            // Encuentra el bloque de c贸digo dentro de ese contenedor
            const codeBlock = codeContainer.querySelector('code');
            
            if (codeBlock) {
                // Copia el texto del c贸digo al portapapeles
                navigator.clipboard.writeText(codeBlock.innerText).then(() => {
                    // Feedback visual para el usuario
                    this.innerText = '隆Copiado!';
                    setTimeout(() => {
                        this.innerText = 'Copiar';
                    }, 2000); // Vuelve al texto original despu茅s de 2 segundos
                }).catch(err => {
                    console.error('Error al copiar el c贸digo: ', err);
                });
            }
        });
    });
});
</script>
</body>

</html>




<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tomo 12: Termómetro Multiescala - Manual de Instrumentación</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="tomo-style.css">
</head>
<body>
    <header>
        <div class="header-container">
            <h1>Tomo 12: Termómetro Multiescala con Interfaz Gráfica</h1>
        </div>
    </header>
    <main class="tomo-content">
 <div class="nav-links">
            <a href="index.html" class="nav-link">&larr; Volver al Índice</a>
            <a href="tomo13.html" class="nav-link">Tomo Siguiente &rarr;</a>
        </div>
        <p>Hoy vamos a subir de nivel en la precisión de nuestras mediciones y en la calidad de nuestra interfaz visual. Crearemos un termómetro de alta precisión con el sensor <strong>DS18B20</strong>, mostraremos los datos en una nítida <strong>pantalla OLED</strong> y usaremos un <strong>Joystick</strong> para navegar entre múltiples pantallas, como si fuera un dispositivo profesional.</p>

        <div class="protagonista-section">
            <h3>🧠 Protagonistas de la Misión</h3>
            <p><strong>DS18B20:</strong> Un termómetro digital de alta precisión que se comunica por el protocolo "One-Wire", permitiendo conectar varios sensores a un solo pin.<br>
            <div class="image-container">
            <img src="ds18b20 piout.png" alt="pinout ds18b20">
            </div>
            <strong>Pantalla OLED:</strong> Una pantalla de alto contraste que no necesita luz de fondo, perfecta para gráficos nítidos y de bajo consumo.<br>
            <div class="image-container">
            <img src="I2C-OLED-Display-Pinout.png" alt="pinout oled">
            </div>
            <strong>Módulo Joystick:</strong> Nuestro dispositivo de entrada, que combina dos potenciómetros (ejes X/Y) y un botón para navegar por los menús.</p>
             <div class="image-container">
            <img src="Pinout-PS2-Joystick-Module.png" alt="pinout oled">
            </div>        
        </div>

        <h2>🧠 El Código: El Sistema Operativo del Termómetro</h2>
        <p>Este código avanzado usa una variable para saber qué menú mostrar (`pantallaActual`). El joystick cambia el valor de esta variable, y una estructura `if/else if` en el `loop` se encarga de dibujar la pantalla correcta.</p>
        <pre class="code-block"><code>
/*
 * Misión 12 (Modificada): Termómetro Multiescala con UI
 * Por: Profe Campos
 * CECyTEM 05 Guacamayas
*/

#include <OneWire.h>
#include <DallasTemperature.h>
#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 64
Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, -1);

#define ONE_WIRE_BUS 2
OneWire oneWire(ONE_WIRE_BUS);
DallasTemperature sensors(&oneWire);

const int pinJoyY = A0;

int pantallaActual = 0;
float tempC, tempF, tempK, tempR;

// (El resto del código como se proporcionó anteriormente, con las funciones
// setup(), loop(), dibujarPantallaCR(), dibujarPantallaFK(),
// dibujarPantallaGrafica() y dibujarTermometro())
        </code></pre>

        <h2>🔌 Manos a la Obra: El Circuito</h2>
        <p>Este circuito integra los tres módulos principales. La conexión más importante es la resistencia de <strong>4.7kΩ</strong>, que es obligatoria para que el protocolo One-Wire del sensor DS18B20 funcione correctamente.</p>
        <div class="image-container">
            <h3>Diagrama del Circuito 12</h3>
            <img src="Tomo 12.png" alt="Diagrama de conexión de un sensor DS18B20, una pantalla OLED y un joystick">
        </div>

        <h2>💡 Conceptos Clave de la Misión</h2>
        <ul>
            <li><strong>Protocolo One-Wire:</strong> Un bus de comunicación que permite que múltiples dispositivos se comuniquen con el microcontrolador a través de un solo cable de datos.</li>
            <li><strong>Interfaz de Usuario (UI):</strong> Diseñar cómo el usuario interactúa con el dispositivo, lo que es clave para que un proyecto sea útil y fácil de usar.</li>
            <li><strong>Máquina de Estados:</strong> Un modelo de programación donde el sistema se encuentra en uno de varios "estados" (pantallas) y cambia entre ellos basado en las entradas.</li>
        </ul>

        <h2>🚀 ¡Inténtalo Tú Mismo! (Retos)</h2>
        <ul>
            <li><strong>Pantalla de Bienvenida Animada:</strong> Crea una secuencia de inicio animada en la función `setup()`, por ejemplo, el nombre "CECyTEM 05" apareciendo letra por letra.</li>
            <li><strong>Registrador de Datos:</strong> Programa una cuarta pantalla en el menú que muestre las temperaturas máxima y mínima registradas. Usa el botón del joystick para reiniciar estos valores.</li>
            <li><strong>Alarma Visual de Temperatura:</strong> En la pantalla de los termómetros gráficos, haz que si la temperatura supera un umbral (ej. 30°C), el contorno del termómetro de Celsius comience a parpadear.</li>
        </ul>
<div class="nav-links bottom-nav-links">
            <a href="index.html" class="nav-link">&larr; Volver al Índice</a>
            <a href="tomo13.html" class="nav-link">Tomo Siguiente &rarr;</a>
        </div>
</main>
    <footer>
        <p>Manual Digital de Instrumentación Industrial | CECyTEM 05 Guacamayas</p>
    </footer>
</body>

</html>

